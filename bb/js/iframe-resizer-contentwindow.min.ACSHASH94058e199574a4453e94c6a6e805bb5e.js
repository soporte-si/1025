/*
 iFrame Resizer (iframeSizer.contentWindow.min.js) - v3.5.14 - 2017-03-30
  Desc: Include this file in any page being loaded into an iframe
        to force the iframe to resize to the content size.
  Requires: iframeResizer.min.js on host page.
  Copyright: (c) 2017 David J. Bradshaw - dave@bradshaw.net
  License: MIT
*/
!function(e){function v(a,b,d){"addEventListener"in window?a.addEventListener(b,d,!1):"attachEvent"in window&&a.attachEvent("on"+b,d)}function ba(a,b,d){"removeEventListener"in window?a.removeEventListener(b,d,!1):"detachEvent"in window&&a.detachEvent("on"+b,d)}function ca(a){return a.charAt(0).toUpperCase()+a.slice(1)}function Aa(a){var b,d,h,c=null,k=0,e=function(){k=E();c=null;h=a.apply(b,d);c||(b=d=null)};return function(){var w=E();k||(k=w);var K=x-(w-k);return b=this,d=arguments,0>=K||K>x?(c&&
(clearTimeout(c),c=null),k=w,h=a.apply(b,d),c||(b=d=null)):c||(c=setTimeout(e,K)),h}}function c(a){L&&"object"==typeof window.console&&console.log(y+"["+z+"] "+a)}function p(a){"object"==typeof window.console&&console.warn(y+"["+z+"] "+a)}function Ba(){var a=da.substr(ea).split(":");z=a[0];M=e!==a[1]?Number(a[1]):M;F=e!==a[2]?"true"===a[2]?!0:!1:F;L=e!==a[3]?"true"===a[3]?!0:!1:L;u=e!==a[4]?Number(a[4]):u;n=e!==a[6]?"true"===a[6]?!0:!1:n;G=a[7];g=e!==a[8]?a[8]:g;fa=a[9];ha=a[10];H=e!==a[11]?Number(a[11]):
H;A.enable=e!==a[12]?"true"===a[12]?!0:!1:!1;N=e!==a[13]?a[13]:N;l=e!==a[14]?a[14]:l}function Ca(){function a(){var a=window.iFrameResizer;c("Reading data from page: "+JSON.stringify(a));O="messageCallback"in a?a.messageCallback:O;P="readyCallback"in a?a.readyCallback:P;B="targetOrigin"in a?a.targetOrigin:B;g="heightCalculationMethod"in a?a.heightCalculationMethod:g;l="widthCalculationMethod"in a?a.widthCalculationMethod:l}function b(a,b){return"function"==typeof a&&(c("Setup custom "+b+"CalcMethod"),
Q[b]=a,a="custom"),a}"iFrameResizer"in window&&Object===window.iFrameResizer.constructor&&(a(),g=b(g,"height"),l=b(l,"width"));c("TargetOrigin for parent set to: "+B)}function R(a,b){e!==b&&""!==b&&"null"!==b&&(document.body.style[a]=b,c("Body "+a+' set to "'+b+'"'))}function Da(){e===G&&(G=M+"px");var a=G;var b=(-1!==a.indexOf("-")&&(p("Negative CSS value ignored for margin"),a=""),a);R("margin",b)}function f(a){var b={add:function(b){function c(){q(a.eventName,a.eventType)}S[b]=c;v(window,b,c)},
remove:function(a){var b=S[a];delete S[a];ba(window,a,b)}};a.eventNames&&Array.prototype.map?(a.eventName=a.eventNames[0],a.eventNames.map(b[a.method])):b[a.method](a.eventName);c(ca(a.method)+" event listener: "+a.eventType)}function ia(a){f({method:a,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]});f({method:a,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]});f({method:a,eventType:"Animation End",eventNames:["animationend",
"webkitAnimationEnd"]});f({method:a,eventType:"Input",eventName:"input"});f({method:a,eventType:"Mouse Up",eventName:"mouseup"});f({method:a,eventType:"Mouse Down",eventName:"mousedown"});f({method:a,eventType:"Orientation Change",eventName:"orientationchange"});f({method:a,eventType:"Print",eventName:["afterprint","beforeprint"]});f({method:a,eventType:"Ready State Change",eventName:"readystatechange"});f({method:a,eventType:"Touch Start",eventName:"touchstart"});f({method:a,eventType:"Touch End",
eventName:"touchend"});f({method:a,eventType:"Touch Cancel",eventName:"touchcancel"});f({method:a,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]});f({method:a,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]});f({method:a,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd",
"MSTransitionEnd","oTransitionEnd","otransitionend"]});"child"===N&&f({method:a,eventType:"IFrame Resized",eventName:"resize"})}function T(a,b,d,h){return b!==a&&(a in d||(p(a+" is not a valid option for "+h+"CalculationMethod."),a=b),c(h+' calculation method set to "'+a+'"')),a}function ja(){g=T(g,U,r,"height")}function ka(){if(!0===n){ia("add");var a=0>u;window.MutationObserver||window.WebKitMutationObserver?a?la():V=Ea():(c("MutationObserver not supported in this browser!"),la())}else c("Auto Resize disabled")}
function ma(){ia("remove");null!==V&&V.disconnect();clearInterval(na)}function Fa(){var a=document.createElement("div");a.style.clear="both";a.style.display="block";document.body.appendChild(a)}function Ga(){function a(a){a=a.split("#")[1]||a;var b=decodeURIComponent(a);b=document.getElementById(b)||document.getElementsByName(b)[0];if(e!==b){var d=b.getBoundingClientRect();b=window.pageXOffset!==e?window.pageXOffset:document.documentElement.scrollLeft;var h=window.pageYOffset!==e?window.pageYOffset:
document.documentElement.scrollTop;b=parseInt(d.left,10)+parseInt(b,10);d=parseInt(d.top,10)+parseInt(h,10);c("Moving to in page link (#"+a+") at x: "+b+" y: "+d);m(d,b,"scrollToOffset")}else c("In page link (#"+a+") not found in iFrame, so sending to parent"),m(0,0,"inPageLink","#"+a)}function b(){""!==location.hash&&"#"!==location.hash&&a(location.href)}function d(){Array.prototype.forEach.call(document.querySelectorAll('a[href^\x3d"#"]'),function(b){function c(b){b.preventDefault();a(this.getAttribute("href"))}
"#"!==b.getAttribute("href")&&v(b,"click",c)})}A.enable?Array.prototype.forEach&&document.querySelectorAll?(c("Setting up location.hash handlers"),d(),v(window,"hashchange",b),setTimeout(b,W)):p("In page linking not fully supported in this browser! (See README.md for IE8 workaround)"):c("In page linking not enabled");return{findTarget:a}}function Ha(){c("Enable public methods");Ia.parentIFrame={autoResize:function(a){return!0===a&&!1===n?(n=!0,ka()):!1===a&&!0===n&&(n=!1,ma()),n},close:function(){m(0,
0,"close");c("Disable outgoing messages");oa=!1;c("Remove event listener: Message");ba(window,"message",pa);!0===n&&ma()},getId:function(){return z},getPageInfo:function(a){"function"==typeof a?(X=a,m(0,0,"pageInfo")):(X=function(){},m(0,0,"pageInfoStop"))},moveToAnchor:function(a){A.findTarget(a)},reset:function(){qa("parentIFrame.reset")},scrollTo:function(a,b){m(b,a,"scrollTo")},scrollToOffset:function(a,b){m(b,a,"scrollToOffset")},sendMessage:function(a,b){m(0,0,"message",JSON.stringify(a),b)},
setHeightCalculationMethod:function(a){g=a;ja()},setWidthCalculationMethod:function(a){l=a;l=T(l,Y,t,"width")},setTargetOrigin:function(a){c("Set targetOrigin: "+a);B=a},size:function(a,b){q("size","parentIFrame.size("+(""+(a?a:"")+(b?","+b:""))+")",a,b)}}}function la(){0!==u&&(c("setInterval: "+u+"ms"),na=setInterval(function(){q("interval","setInterval: "+u)},Math.abs(u)))}function Ea(){function a(a){function b(a){!1===a.complete&&(c("Attach listeners to "+a.src),a.addEventListener("load",d,!1),
a.addEventListener("error",h,!1),k.push(a))}"attributes"===a.type&&"src"===a.attributeName?b(a.target):"childList"===a.type&&Array.prototype.forEach.call(a.target.querySelectorAll("img"),b)}function b(a){c("Remove listeners from "+a.src);a.removeEventListener("load",d,!1);a.removeEventListener("error",h,!1);k.splice(k.indexOf(a),1)}function d(a){b(a.target);q("imageLoad","Image loaded: "+a.target.src,e,e)}function h(a){b(a.target);q("imageLoadFailed","Image load failed: "+a.target.src,e,e)}function w(b){q("mutationObserver",
"mutationObserver: "+b[0].target+" "+b[0].type);b.forEach(a)}var k=[],f=window.MutationObserver||window.WebKitMutationObserver,g=function(){var a=document.querySelector("body");return g=new f(w),c("Create body MutationObserver"),g.observe(a,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0}),g}();return{disconnect:function(){"disconnect"in g&&(c("Disconnect body MutationObserver"),g.disconnect(),k.forEach(b))}}}function Z(a,b){b=b||document.body;
if("defaultView"in document&&"getComputedStyle"in document.defaultView)b=document.defaultView.getComputedStyle(b,null),b=null!==b?b[a]:0;else if(a=b.currentStyle[a],/^\d+(px)?$/i.test(a))b=parseInt(a,ra);else{var c=b.style.left,h=b.runtimeStyle.left;b=(b.runtimeStyle.left=b.currentStyle.left,b.style.left=a||0,a=b.style.pixelLeft,b.style.left=c,b.runtimeStyle.left=h,a)}return parseInt(b,ra)}function aa(a,b){for(var d=b.length,h,e=0,k=ca(a),g=E(),f=0;d>f;f++)h=b[f].getBoundingClientRect()[a]+Z("margin"+
k,b[f]),h>e&&(e=h);g=E()-g;c("Parsed "+d+" HTML elements");c("Element position calculated in "+g+"ms");g>x/2&&(x=2*g,c("Event throttle increased to "+x+"ms"));return e}function I(a){return[a.bodyOffset(),a.bodyScroll(),a.documentElementOffset(),a.documentElementScroll()]}function sa(a,b){var c=document.querySelectorAll("["+b+"]");return 0===c.length&&(p("No tagged elements ("+b+") found on page"),document.querySelectorAll("body *")),aa(a,c)}function Ja(a,b,d,h){var f,k;(f=e!==d?d:r[g](),k=e!==h?h:
t[l](),Math.abs(C-f)<=H&&(!F||Math.abs(D-k)<=H))&&"init"!==a?a in{init:1,interval:1,size:1}||!(g in ta||F&&l in ta)?a in{interval:1}||c("No change in size detected"):qa(b):(ua(),C=f,D=k,m(C,D,a))}function q(a,b,d,e){J&&a in Ka?c("Trigger event cancelled: "+a):(a in{reset:1,resetPage:1,init:1}||c("Trigger event: "+b),La(a,b,d,e))}function ua(){J||(J=!0,c("Trigger event lock on"));clearTimeout(va);va=setTimeout(function(){J=!1;c("Trigger event lock off");c("--")},W)}function wa(a){C=r[g]();D=t[l]();
m(C,D,a)}function qa(a){var b=g;g=U;c("Reset trigger event: "+a);ua();wa("reset");g=b}function m(a,b,d,g,f){!0===oa&&(e===f?f=B:c("Message targetOrigin: "+f),a=z+":"+(a+":"+b)+":"+d+(e!==g?":"+g:""),c("Sending message to host page ("+a+")"),xa.postMessage(y+a,f))}function pa(a){function b(){return a.data.substr(a.data.indexOf(":")+1)}function d(){return a.data.split(":")[2]in{"true":1,"false":1}}function f(){var b=a.data.split("]")[1].split(":")[0];b in e?e[b]():("undefined"==typeof module||!module.exports)&&
"iFrameResize"in window||d()||p("Unexpected message ("+a.data+")")}var e={init:function(){function b(){da=a.data;xa=a.source;Ba();c("Initialising iFrame ("+location.href+")");Ca();Da();R("background",fa);R("padding",ha);Fa();ja();l=T(l,Y,t,"width");document.documentElement.style.height="";document.body.style.height="";c('HTML \x26 body height set to "auto"');Ha();ka();A=Ga();q("init","Init message from host page");P();ya=!1;setTimeout(function(){za=!1},W)}document.body?b():(c("Waiting for page ready"),
v(window,"readystatechange",e.initFromParent))},reset:function(){za?c("Page reset ignored by init"):(c("Page size reset by host page"),wa("resetPage"))},resize:function(){q("resizeParent","Parent window requested size check")},moveToAnchor:function(){A.findTarget(b())},inPageLink:function(){this.moveToAnchor()},pageInfo:function(){var a=b();c("PageInfoFromParent called from parent: "+a);X(JSON.parse(a));c(" --")},message:function(){var a=b();c("MessageCallback called from parent: "+a);O(JSON.parse(a));
c(" --")}};y===(""+a.data).substr(0,ea)&&(!1===ya?f():d()?e.init():c('Ignored message of type "'+a.data.split("]")[1].split(":")[0]+'". Received before initialization.'))}if("undefined"!=typeof window){var n=!0,ra=10,fa="",M=0,G="",V=null,ha="",F=!1,Ka={resize:1,click:1},W=128,ya=!0,C=1,U="bodyOffset",g=U,za=!0,da="",A={},u=32,na=null,L=!1,y="[iFrameSizer]",ea=y.length,z="",ta={max:1,min:1,bodyScroll:1,documentElementScroll:1},N="child",oa=!0,xa=window.parent,B="*",H=0,J=!1,va=null,x=16,D=1,Y="scroll",
l=Y,Ia=window,O=function(){p("MessageCallback function not defined")},P=function(){},X=function(){},Q={height:function(){return p("Custom height calculation function not defined"),document.documentElement.offsetHeight},width:function(){return p("Custom width calculation function not defined"),document.body.scrollWidth}},S={},E=Date.now||function(){return(new Date).getTime()},r={bodyOffset:function(){return document.body.offsetHeight+Z("marginTop")+Z("marginBottom")},offset:function(){return r.bodyOffset()},
bodyScroll:function(){return document.body.scrollHeight},custom:function(){return Q.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,I(r))},min:function(){return Math.min.apply(null,I(r))},grow:function(){return r.max()},lowestElement:function(){return Math.max(r.bodyOffset(),aa("bottom",document.querySelectorAll("body *")))},taggedElement:function(){return sa("bottom",
"data-iframe-height")}},t={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return Q.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(t.bodyScroll(),t.documentElementScroll())},max:function(){return Math.max.apply(null,I(t))},min:function(){return Math.min.apply(null,I(t))},
rightMostElement:function(){return aa("right",document.querySelectorAll("body *"))},taggedElement:function(){return sa("right","data-iframe-width")}},La=Aa(Ja);v(window,"message",pa);"loading"!==document.readyState&&window.parent.postMessage("[iFrameResizerChild]Ready","*")}}();